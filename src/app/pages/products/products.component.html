<head>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,700,0,200" />
</head>
<div class="container-fluid mt-5">
  <div class="row">
    <div class="col">
        <app-product-filters [filters]="(filters$ | async)??{}" (filtersChange)="filtersChanged($event)"></app-product-filters>
      <br/>
      <hr class="style-seven"/>
      <div class="row row-cols-1 row-cols-md-4 g-6 mt-5">
        <div class="col" *ngFor="let product of products$ |async">
          <div class="card mt-2">
            <div class="card-body">
              <h5 class="card-title">{{product.name}}</h5>
              <h6 class="card-subtitle mb-2 text-muted"><del>{{product.netPrice | currency}}</del> -{{(product.discount*100).toFixed(0)}}% {{getDiscoutedPrice(product) | currency}}</h6>
              <p class="card-text">{{product.description}}</p>
              <a href="#" class="btn btn-link">details</a>
            </div>
            <div class="input-group mb-3" style="padding: 20px;">
              <input type="number" class="form-control" min="1" pattern="[0-9]*" (change)="updateQuantity($event)" placeholder="Quantity" aria-label="Recipient's username" aria-describedby="basic-addon2">
              <div class="input-group-append">
                <button type="button" (click)="addItemToCart(product.id)" class="btn btn-outline-dark buttonAdd" >
                  <span class="material-symbols-outlined">
                      add_shopping_cart
                  </span>
                </button>
              </div>
                <div *ngIf="addedItem.includes(product.id)" class="item-added-label">
                  Added to your Cart
                </div>
            </div>
          </div>
        </div>
      </div>
      <div class="d-flex justify-content-center mt-4">
        <button class="btn btn-primary btn-sm" (click)="previousPage()" style="width: 110px !important;">Previous</button>
        <span>
          ~ Page {{ (currentPage$ | async) }} of {{ (totalPages$ | async) }} ~
        </span>
        <button class="btn btn-primary btn-sm" (click)="nextPage()" style="width: 110px !important;">Next</button>
      </div>
    </div>
    <div class="col side-cart">
      <app-side-cart></app-side-cart>
    </div>
  </div>

</div>
